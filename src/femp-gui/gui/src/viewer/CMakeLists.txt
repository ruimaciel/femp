cmake_minimum_required(VERSION 3.10)

set(viewer_INCLUDES
    include/viewer/BaseViewport.h++
    include/viewer/Camera.h++
    include/viewer/ModelViewport.h++
    include/viewer/PostprocessingViewport.h++
    include/viewer/TensorFieldViewport.h++
    include/viewer/ViewportData.h++
)

set(viewer_HEADERS
    src/boundaries/BoundaryStrategy.h++
    src/boundaries/CollisionDetection.h++
    src/boundaries/SphericalBoundary.h++
    src/InputStates/Input.h++
    src/InputStates/InputState.h++
    src/InputStates/ISLeftClick.h++
    src/InputStates/ISLeftDrag.h++
    src/InputStates/ISRightClick.h++
    src/InputStates/ISRightDrag.h++
    src/InputStates/ISStart.h++
    src/RenderGroup.h++
    src/SceneGraph.h++
    src/SceneGraphComponents/DisplacementsRepresentationPolicy/DisplacementsPolicy.h++
    src/SceneGraphComponents/DisplacementsRepresentationPolicy/DisplacementsRepresentationPolicy.h++
    src/SceneGraphComponents/DisplacementsRepresentationPolicy/NoDisplacementsPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/ElementRepresentationFlyweightFactory.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/ElementRepresentationPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/ConstantGradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/GradientFieldFlyweightFactory.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/NeutralGradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain11GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain12GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain13GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain22GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain23GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain33GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress11GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress12GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress13GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress22GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress23GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress33GradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/VonMisesGradientFieldPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldRepresentationPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/OpaqueRepresentationPolicy.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/StressField/StressFieldFactory.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/StressField/StressFieldRepresentation.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/StressField/StressTensor.h++
    src/SceneGraphComponents/ElementRepresentationPolicy/StressFieldRepresentationPolicy.h++
    src/SceneGraphComponents/Elements/Hexahedron20.h++
    src/SceneGraphComponents/Elements/Hexahedron27.h++
    src/SceneGraphComponents/Elements/Hexahedron8.h++
    src/SceneGraphComponents/Elements/Prism15.h++
    src/SceneGraphComponents/Elements/Prism18.h++
    src/SceneGraphComponents/Elements/Prism6.h++
    src/SceneGraphComponents/Elements/Tetrahedron10.h++
    src/SceneGraphComponents/Elements/Tetrahedron4.h++
    src/SceneGraphComponents/hud/HudObject.h++
    src/SceneGraphComponents/hud/HudSelection.h++
    src/SceneGraphComponents/Operations/OperationsVisitor.h++
    src/SceneGraphComponents/Operations/SelectFrustumInclusionOperation.h++
    src/SceneGraphComponents/Operations/SelectRayIntersectionOperation.h++
    src/SceneGraphComponents/Operations/ToggleRenderOperation.h++
    src/SceneGraphComponents/Operations/ToggleSelectionOperation.h++
    src/SceneGraphComponents/SceneComponentFactory.h++
    src/SceneGraphComponents/SceneGraphComponent.h++
    src/SceneGraphComponents/SceneGraphException.h++
    src/SceneGraphComponents/SGCElement.h++
    src/SceneGraphComponents/SGCNode.h++
    src/SceneGraphComponents/SGCNodeRestrictions.h++
    src/SceneGraphComponents/SGCPickRay.h++
    src/ViewportStates/ViewportState.h++
    src/ViewportStates/VPStateDisplacements.h++
    src/ViewportStates/VPStateGradients.h++
    src/ViewportStates/VPStateModel.h++
    src/ViewportStates/VPStateTensorFields.h++
    )

set(viewer_SOURCES
    src/BaseViewport.c++
    src/boundaries/BoundaryStrategy.c++
    src/boundaries/CollisionDetection.c++
    src/boundaries/SphericalBoundary.c++
    src/Camera.c++
    src/InputStates/Input.c++
    src/InputStates/InputState.c++
    src/InputStates/ISLeftClick.c++
    src/InputStates/ISLeftDrag.c++
    src/InputStates/ISRightClick.c++
    src/InputStates/ISRightDrag.c++
    src/InputStates/ISStart.c++
    src/ModelViewport.c++
    src/PostprocessingViewport.c++
    src/RenderGroup.c++
    src/SceneGraph.c++
    src/SceneGraphComponents/DisplacementsRepresentationPolicy/DisplacementsPolicy.c++
    src/SceneGraphComponents/DisplacementsRepresentationPolicy/DisplacementsRepresentationPolicy.c++
    src/SceneGraphComponents/DisplacementsRepresentationPolicy/NoDisplacementsPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/ElementRepresentationFlyweightFactory.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/ElementRepresentationPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/ConstantGradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/GradientFieldFlyweightFactory.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/NeutralGradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain11GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain12GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain13GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain22GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain23GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Strain33GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress11GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress12GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress13GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress22GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress23GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/Stress33GradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldPolicy/VonMisesGradientFieldPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/GradientFieldRepresentationPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/OpaqueRepresentationPolicy.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/StressField/StressFieldFactory.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/StressField/StressFieldRepresentation.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/StressField/StressTensor.c++
    src/SceneGraphComponents/ElementRepresentationPolicy/StressFieldRepresentationPolicy.c++
    src/SceneGraphComponents/Elements/Hexahedron20.c++
    src/SceneGraphComponents/Elements/Hexahedron27.c++
    src/SceneGraphComponents/Elements/Hexahedron8.c++
    src/SceneGraphComponents/Elements/Prism15.c++
    src/SceneGraphComponents/Elements/Prism18.c++
    src/SceneGraphComponents/Elements/Prism6.c++
    src/SceneGraphComponents/Elements/Tetrahedron10.c++
    src/SceneGraphComponents/Elements/Tetrahedron4.c++
    src/SceneGraphComponents/hud/HudObject.c++
    src/SceneGraphComponents/hud/HudSelection.c++
    src/SceneGraphComponents/Operations/OperationsVisitor.c++
    src/SceneGraphComponents/Operations/SelectFrustumInclusionOperation.c++
    src/SceneGraphComponents/Operations/SelectRayIntersectionOperation.c++
    src/SceneGraphComponents/Operations/ToggleRenderOperation.c++
    src/SceneGraphComponents/Operations/ToggleSelectionOperation.c++
    src/SceneGraphComponents/SceneComponentFactory.c++
    src/SceneGraphComponents/SceneGraphComponent.c++
    src/SceneGraphComponents/SGCElement.c++
    src/SceneGraphComponents/SGCNode.c++
    src/SceneGraphComponents/SGCNodeRestrictions.c++
    src/SceneGraphComponents/SGCPickRay.c++
    src/TensorFieldViewport.c++
    src/ViewportData.c++
    src/ViewportStates/ViewportState.c++
    src/ViewportStates/VPStateDisplacements.c++
    src/ViewportStates/VPStateGradients.c++
    src/ViewportStates/VPStateModel.c++
    src/ViewportStates/VPStateTensorFields.c++
    )

add_library(viewer OBJECT
    ${viewer_INCLUDES}
    ${viewer_HEADERS}
    ${viewer_SOURCES}
    )

target_include_directories(viewer
    PUBLIC 
    ./include
    ${CMAKE_CURRENT_SOURCE_DIR}/src #FIXIT included to simplify migration
    PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/src
    .. #TODO required to include <ProjectVisitor/ProjectVisitor.h++> sidestep dependency
    )

set_target_properties(viewer
    PROPERTIES
    CXX_STANDARD 14
    CXX_EXTENSIONS OFF
    AUTOMOC ON
    AUTOUIC ON
    )

target_link_libraries(viewer
    PUBLIC
    libfemp
    Qt5::Core
    PRIVATE
    application
    selection
    persistence
    gui_options::Object
    Qt5::Gui
    Qt5::OpenGL
    )

add_library(viewer::Object ALIAS viewer)